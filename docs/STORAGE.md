# Хранилище файлов (S3 Beget)

## Принципы

- В БД хранится **только ключ объекта** (S3 key).
- **URL** к файлу строится **централизованно на бэкенде** (например, через сервис файлов или конфиг `FILE_PUBLIC_BASE_URL` + ключ).

## Загрузка

- Использовать **non-chunked** загрузку (требование для S3-провайдеров вроде Beget).
- Ограничение размера: учитывать `MAX_UPLOAD_SIZE_BYTES` на бэке и `client_max_body_size` в Nginx.

## Проверка после загрузки

- После каждой загрузки выполнять **HEAD-запрос** к полученному URL и убеждаться, что файл доступен.
- Эту проверку покрыть **автотестом**.

## Nginx

- В конфигурации Nginx обязательно задавать `client_max_body_size` для маршрутов, через которые загружаются файлы.
